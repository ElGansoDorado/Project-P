using UnityEngine;
using UnityEngine.UI;

/// <summary>
/// Получение монет
/// </summary>

public class GettingGold : MonoBehaviour
{
    private byte tapCount; //количество совершённых кликов
    public byte TapCount
    {
        get => tapCount;
        set
        {
            if (value >= CoinValueMax) tapCount = tapMax;
            else tapCount = value;

            remainingNumberOfClicksUI.text = "кликов: " + TapCount + "/" + tapMax;
        }
    }

    byte tapMax; //кол-во кликов, которое нужно совершить

    private int coinValue; //содержимое хранилища
    public int CoinValue
    {
        get => coinValue;
        set
        {
            if (value >= CoinValueMax) coinValue = CoinValueMax;
            else coinValue = value;

            infoUI.text = CoinValue + "/" + CoinValueMax;
        }
    }
    public int CoinValueMax { get; set; } //объём хранилища 
    public int increaseCoins { get; set; } // кол-во получаемых монет 

    public Text infoUI; //ui на кол-во монет в хранилище 
    public Text remainingNumberOfClicksUI; //ui на кол-во кликов до спавна новых монет 

    private void Start()
    {
        TapCount = 0;
        tapMax = 4;
        increaseCoins = 10;
        CoinValueMax = 100;
        CoinValue = 0;
    }

    public void TapCheck() // метод для генерации монет 
    {
        TapCount++;

        if (TapCount >= tapMax)
        {
            TapCount = 0;
            CoinValue += increaseCoins;
        }
    }

    public void GoldsPlus()
    {
        Repository.PlusCoin(CoinValue); //забираем монетки в общее хранилище
        CoinValue = 0;
    }
}
